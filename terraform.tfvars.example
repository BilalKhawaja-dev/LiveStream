# Example Terraform variables file for Development Environment
# Copy this file to terraform.tfvars and customize for your environment
# For other environments, use the files in environments/ directory

# Basic Configuration
aws_region   = "eu-west-2"
environment  = "dev"
project_name = "streaming-logs"

# Logging Configuration - Development Optimized
log_retention_days      = 7    # Short retention for cost savings
s3_lifecycle_hot_days   = 7    # Quick transition to save costs
s3_lifecycle_warm_days  = 30   # Shorter warm period
s3_lifecycle_cold_days  = 365  # 1 year vs 7 years for prod

# Kinesis Firehose - Development Optimized
firehose_buffer_size     = 1   # Smaller buffer for faster processing in dev
firehose_buffer_interval = 60  # 1 minute vs 5 minutes for prod

# Aurora Configuration - Development Optimized
aurora_min_capacity                           = 0.5                        # Minimum for cost savings
aurora_max_capacity                           = 2                          # Lower max capacity
aurora_instance_count                         = 1                          # Single instance for dev
aurora_engine_version                         = "8.0.mysql_aurora.3.02.0"  # Latest stable version
aurora_database_name                          = "streaming_logs"           # Default database name
aurora_master_username                        = "admin"                    # Master username
aurora_port                                   = 3306                       # MySQL port
aurora_backup_retention_period                = 7                          # Shorter backup retention
aurora_backup_window                          = "03:00-04:00"              # Low-traffic window
aurora_maintenance_window                     = "sun:04:00-sun:05:00"      # Sunday maintenance
aurora_deletion_protection                    = false                      # Disabled for dev
aurora_enabled_cloudwatch_logs_exports        = ["error", "general", "slowquery"]
aurora_monitoring_interval                    = 60                         # Enhanced monitoring
aurora_performance_insights_enabled           = true                       # Enable for dev analysis
aurora_performance_insights_retention_period  = 7                          # Short retention for cost
aurora_auto_minor_version_upgrade             = true                       # Auto-upgrade enabled
aurora_enable_cloudwatch_alarms               = true                       # Enable monitoring
aurora_alarm_cpu_threshold                    = 80                         # CPU alarm threshold
aurora_alarm_connection_threshold             = 80                         # Connection alarm threshold
aurora_alarm_freeable_memory_threshold        = 134217728                  # 128 MB memory threshold
aurora_backup_alarm_enabled                   = true                       # Monitor backup failures
aurora_backup_window_hours                    = 2                          # Expected backup duration

# DynamoDB Configuration - Development Optimized
dynamodb_billing_mode                        = "PAY_PER_REQUEST"  # Cost-effective for dev
dynamodb_read_capacity                       = 5                  # Provisioned mode capacity
dynamodb_write_capacity                      = 5                  # Provisioned mode capacity
dynamodb_enable_point_in_time_recovery       = true               # Enable backups
dynamodb_backup_retention_days               = 7                  # Shorter retention
dynamodb_enable_streams                      = false              # Disabled for cost
dynamodb_stream_view_type                    = "NEW_AND_OLD_IMAGES"
dynamodb_enable_ttl                          = true               # Enable for cost optimization
dynamodb_enable_cloudwatch_alarms            = true               # Enable monitoring
dynamodb_read_throttle_threshold             = 5                  # Throttle alarm threshold
dynamodb_write_throttle_threshold            = 5                  # Throttle alarm threshold
dynamodb_consumed_read_capacity_threshold    = 80                 # Capacity alarm threshold
dynamodb_consumed_write_capacity_threshold   = 80                 # Capacity alarm threshold
dynamodb_enable_autoscaling                  = false              # Disabled for dev
dynamodb_autoscaling_read_target             = 70                 # Auto-scaling target
dynamodb_autoscaling_write_target            = 70                 # Auto-scaling target
dynamodb_autoscaling_min_read_capacity       = 5                  # Min capacity
dynamodb_autoscaling_max_read_capacity       = 50                 # Max capacity (lower for dev)
dynamodb_autoscaling_min_write_capacity      = 5                  # Min capacity
dynamodb_autoscaling_max_write_capacity      = 50                 # Max capacity (lower for dev)
dynamodb_backup_storage_threshold_bytes      = 5368709120         # 5 GB threshold for dev
dynamodb_enable_backup_validation            = true               # Enable validation
dynamodb_backup_validation_schedule          = "rate(12 hours)"   # Less frequent for dev

# Network Configuration
vpc_cidr           = "10.0.0.0/16"
availability_zones = ["eu-west-2a", "eu-west-2b"]

# Cost Optimization Flags - Disabled for Development
enable_cross_region_backup  = false
enable_enhanced_monitoring  = false
enable_performance_insights = false
enable_mfa_delete          = false

# Monitoring Configuration
cloudwatch_alarm_evaluation_periods    = 2
cloudwatch_alarm_threshold_error_rate  = 5.0

# Security Configuration - Development Optimized
kms_key_deletion_window = 7  # Shorter deletion window for dev

# Glue Data Catalog Configuration - Development Optimized
glue_crawler_schedule              = "cron(0 2 * * ? *)"  # Daily at 2 AM UTC
enable_glue_crawler               = true
glue_partition_projection_enabled = true  # Cost optimization

# Athena Configuration - Development Optimized
athena_results_retention_days                    = 30    # Shorter retention for cost savings
athena_bytes_scanned_cutoff_gb                  = 1     # 1GB limit for dev vs 10GB for prod
enable_athena_query_logging                     = true  # Enable for debugging
enable_athena_cost_monitoring                   = true  # Monitor costs in dev
enable_athena_performance_monitoring            = true  # Monitor performance
athena_query_execution_time_threshold_minutes   = 5     # 5 minute threshold for dev

# IAM Configuration - Development Optimized
iam_create_user_groups           = true   # Enable user groups for development
iam_enable_developer_access      = true   # Enable developer access in dev
iam_enable_cross_service_access  = true   # Enable cross-service access
iam_require_mfa                  = false  # Disabled for development ease
iam_max_session_duration         = 3600   # 1 hour session duration
iam_enable_cross_account_access  = false  # Disabled for development

# Example sensitive variables (use environment variables or AWS Secrets Manager):
# export TF_VAR_database_password="your-secure-password"
# export TF_VAR_api_key="your-api-key"

# For production deployments, copy and modify:
# cp environments/prod/terraform.tfvars terraform.tfvars
# 
# For staging deployments:
# cp environments/staging/terraform.tfvars terraform.tfvars